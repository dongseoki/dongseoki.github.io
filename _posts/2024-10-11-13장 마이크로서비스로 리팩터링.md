---
title: 13장 마이크로서비스로 리팩터링
date: 2024-10-11 12:00:00 +0900
categories: [Software Development, Software Design]
tags: [MSA, 마이크로서비스 패턴 크리스 리처드슨] # TAG names should always be lowercase
---

# 목차

```
13.1 마이크로서비스 리팩터링 개요
__13.1.1 모놀리스를 왜 리팩터링하는가?
__13.1.2 모놀리스 옥죄기
13.2 모놀리스 → 마이크로서비스 리팩터링 전략
__13.2.1 새 기능을 서비스로 구현한다
__13.2.2 표현 계층과 백엔드를 분리한다
__13.2.3 기능을 여러 서비스로 추출한다
13.3 서비스와 모놀리스 간 협동 설계
__13.3.1 통합 글루 설계
__13.3.2 서비스와 모놀리스에 걸쳐 데이터 일관성 유지
__13.3.3 인증/인가 처리
13.4 새 기능을 서비스로 구현: 배달 실패한 주문 처리
__13.4.1 배달 지연 서비스 설계
__13.4.2 배달 지연 서비스를 위한 통합 글루 설계
13.5 모놀리스 분해: 배달 관리 추출
__13.5.1 현행 배달 관리 기능
__13.5.2 배달 서비스 개요
__13.5.3 배달 서비스의 도메인 모델 설계
__13.5.4 배달 서비스의 통합 글루 설계
__13.5.5 배달 서비스와 상호 작용할 수 있게 모놀리스를 변경
13.6 마치며
```

# 정리 전략?

- 전부 정리는 NO
- 핵심중에서 꼭 적고 가야겠다 싶은 것만!
- 나의 생각을 섞어서 적을것..!
- 떠오르는 것 먼저 간단하게..!

# 내용

## 13.1 마이크로서비스 리팩터링 개요

### \_\_13.1.1 모놀리스를 왜 리팩터링하는가?

- 유지 보수에 오래 걸리니까!, 테스트도 어렵고, 개발 공수도 많이 들고(msa에 비해서)

### \_\_13.1.2 모놀리스 옥죄기

- 옥죄기를 하길 할건데 단계적으로 바꿔야한다!

## 13.2 모놀리스 → 마이크로서비스 리팩터링 전략

### \_\_13.2.1 새 기능을 서비스로 구현한다

- 말 그대로

### \_\_13.2.2 표현 계층과 백엔드를 분리한다

- 이렇게 함으로써 프론트 개발과 백엔드 개발을 나눌수 있고, 각자가 자신의 프로젝트를 빠르게 개발, 배포할 수 있다.

### \_\_13.2.3 기능을 여러 서비스로 추출한다

- 모놀리스의 기능 1개를 여러 서비스로 추출한다는 의미.

## 13.3 서비스와 모놀리스 간 협동 설계

### \_\_13.3.1 통합 글루 설계

- 통합 글루라고, 모놀리스와 msa를 연결해주는 다리에 대한 설계.

### \_\_13.3.2 서비스와 모놀리스에 걸쳐 데이터 일관성 유지

- 데이터 일관성을 위해서 통합 글루를 이용.
- 참고로 각자의 영속성DB에 복제하는 방식으로 일관성을 유지한다.

### \_\_13.3.3 인증/인가 처리

- 토큰이랑 세션 방식을 모두 고려한 인증 인가 처리가 필요하다 이런 내용이 였다.
- 특히 msa는 세션으로 관리하지 않으니, 모놀리스에서 세션을 로그인 유지를 위해 쓰고 있다면, 그것을 쓰면서도 토큰의 동시 사용을 고려해야함.

## 13.4 새 기능을 서비스로 구현: 배달 실패한 주문 처리

### \_\_13.4.1 배달 지연 서비스 설계

### \_\_13.4.2 배달 지연 서비스를 위한 통합 글루 설계

## 13.5 모놀리스 분해: 배달 관리 추출

### \_\_13.5.1 현행 배달 관리 기능

### \_\_13.5.2 배달 서비스 개요

### \_\_13.5.3 배달 서비스의 도메인 모델 설계

### \_\_13.5.4 배달 서비스의 통합 글루 설계

### \_\_13.5.5 배달 서비스와 상호 작용할 수 있게 모놀리스를 변경

## 13.6 마치며

# 참고자료

https://freeend.tistory.com/117
https://velog.io/@jimin3263/MSA-13.-%EB%A7%88%EC%9D%B4%ED%81%AC%EB%A1%9C%EC%84%9C%EB%B9%84%EC%8A%A4%EB%A1%9C-%EB%A6%AC%ED%8C%A9%ED%84%B0%EB%A7%81-597y17vk
