---
title: 5장 비즈니스 로직 설계
date: 2024-09-09 20:13:00 +0900
categories: [Software Development, Software Design]
tags: [MSA, 마이크로서비스 패턴 크리스 리처드슨] # TAG names should always be lowercase
---

# 목차

```
6장 비즈니스 로직 개발: 이벤트 소싱
6.1 이벤트 소싱 응용 비즈니스 로직 개발
__6.1.1 기존 영속화의 문제점
__6.1.2 이벤트 소싱 개요
__6.1.3 동시 업데이트: 낙관적 잠금
__6.1.4 이벤트 소싱과 이벤트 발행
__6.1.5 스냅샷으로 성능 개선
__6.1.6 멱등한 메시지 처리
__6.1.7 도메인 이벤트 발전시키기
__6.1.8 이벤트 소싱의 장점
__6.1.9 이벤트 소싱의 단점
6.2 이벤트 저장소 구현
__6.2.1 이벤추에이트 로컬 이벤트 저장소의 작동 원리
__6.2.2 자바용 이벤추에이트 클라이언트 프레임워크
6.3 사가와 이벤트 소싱을 접목
__6.3.1 코레오그래피 사가 구현: 이벤트 소싱
__6.3.2 오케스트레이션 사가 생성
__6.3.3 이벤트 소싱 기반의 사가 참여자 구현
__6.3.4 사가 오케스트레이터 구현: 이벤트 소싱
6.4 마치며



```

# 정리 전략?

- 전부 정리는 NO
- 핵심중에서 꼭 적고 가야겠다 싶은 것만!
- 나의 생각을 섞어서 적을것..!
- 떠오르는 것 먼저 간단하게..!

6장 비즈니스 로직 개발: 이벤트 소싱
6.1 이벤트 소싱 응용 비즈니스 로직 개발
**6.1.1 기존 영속화의 문제점
**6.1.2 이벤트 소싱 개요
**6.1.3 동시 업데이트: 낙관적 잠금
**6.1.4 이벤트 소싱과 이벤트 발행
**6.1.5 스냅샷으로 성능 개선
**6.1.6 멱등한 메시지 처리
**6.1.7 도메인 이벤트 발전시키기
**6.1.8 이벤트 소싱의 장점
**6.1.9 이벤트 소싱의 단점
6.2 이벤트 저장소 구현
**6.2.1 이벤추에이트 로컬 이벤트 저장소의 작동 원리
**6.2.2 자바용 이벤추에이트 클라이언트 프레임워크
6.3 사가와 이벤트 소싱을 접목
**6.3.1 코레오그래피 사가 구현: 이벤트 소싱
**6.3.2 오케스트레이션 사가 생성
**6.3.3 이벤트 소싱 기반의 사가 참여자 구현
\_\_6.3.4 사가 오케스트레이터 구현: 이벤트 소싱
6.4 마치며

## 6장 비즈니스 로직 개발: 이벤트 소싱

- 여기서 말하는 이벤트 소싱이란, 일련의 이벤트의 발생을 DB에 저장하는 방식을 의미했던 것으로 기억
- 보통의 개발은 현재 상태만 저장을 하는데, 이벤트 소싱을 과정을 저장한다고 볼수있음.

### 6.1 이벤트 소싱 응용 비즈니스 로직 개발

#### \*\*6.1.1 기존 영속화의 문제점

- 기존 영속화는 과정에 대한 정보가 없다는 것이 문제.
- 개발자가 수동으로 로그 테이블이나 로그를 남기지 않는 이상 추적이 불가능함.

#### \*\*6.1.2 이벤트 소싱 개요

- 앞서 말한듯.

#### \*\*6.1.3 동시 업데이트: 낙관적 잠금

- 너무 익숙한 개념. 패스~

#### \*\*6.1.4 이벤트 소싱과 이벤트 발행

- 둘의 차이를 명확히 설명하지 못하겠다.

#### \*\*6.1.5 스냅샷으로 성능 개선

- 과정을 저장하는 방식의 단점은 현재 상태를 보기 위해서는 과정에 대하는 기록을 읽고 모두 연산해서 현재 상태를 알아내야한다는 단점이 있다.
- 즉 history가 길면, 성능이 안좋을수 있다.
- 이것을 적당한 시점에 스냅샷을 저장함으로써 일부 해소 가능하다는 이야기.

#### \*\*6.1.6 멱등한 메시지 처리

- 멱등성은 동일한 인풋이 여러번 주어져도, 영향이 똑같은 것을 의미한다.
- 발행된 이벤트를 처리하는 컨슈머도, 중복된 이벤트가 발생했을때, 중복을 인지하고, 그것에 적절한 대응을 해주거나(아무것도 안하는 것이 방법일듯) 아무것도 하지 않아야한다.
- 또는 중복을 솎아내는 작업이 필요하더라~, 이 이야기인거임.

#### \*\*6.1.7 도메인 이벤트 발전시키기

- 어떤 발전이였을까? 생각나지 않는다.

#### \*\*6.1.8 이벤트 소싱의 장점

- 소싱의 장점은 앞서 언급했다. 뭔가 더 있던거 같다.

#### \*\*6.1.9 이벤트 소싱의 단점

- 단점은 확실히 기억나는 것은 개발이 좀더 복잡해진다는 것이다.
- 그리고 중요한 단점이 하나 더있었는데..

### 6.2 이벤트 저장소 구현

- 앞서 말한 이벤트를 어떻게 저장할까? RDBMS를 이용할 수도 있고, nosql을 이용할 수도 있다.

#### \*\*6.2.1 이벤추에이트 로컬 이벤트 저장소의 작동 원리

- 모르겠다.

#### \*\*6.2.2 자바용 이벤추에이트 클라이언트 프레임워크

- 모름

### 6.3 사가와 이벤트 소싱을 접목

#### \*\*6.3.1 코레오그래피 사가 구현: 이벤트 소싱

- 이런 이벤트 소싱도, 비즈니스적 정합성 관리를 위해 SAGA를 도입할 수 있다.

#### \*\*6.3.2 오케스트레이션 사가 생성

-

#### \*\*6.3.3 이벤트 소싱 기반의 사가 참여자 구현

#### \_\_6.3.4 사가 오케스트레이터 구현: 이벤트 소싱

### 6.4 마치며
