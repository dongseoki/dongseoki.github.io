---
title: 9장 마이크로서비스 테스트 1부
date: 2024-09-20 17:00:00 +0900
categories: [Software Development, Software Design]
tags: [MSA, 마이크로서비스 패턴 크리스 리처드슨] # TAG names should always be lowercase
---

# 목차

```
9장 마이크로서비스 테스트 1부
9.1 마이크로서비스 아키텍처 테스트 전략
__9.1.1 테스트 개요
__9.1.2 마이크로서비스 테스트
__9.1.3 배포 파이프라인
9.2 서비스 단위 테스트 작성
__9.2.1 단위 테스트 작성: 엔터티
__9.2.2 단위 테스트 작성: 밸류 객체
__9.2.3 단위 테스트 작성: 사가
__9.2.4 단위 테스트 작성: 도메인 서비스
__9.2.5 단위 테스트 작성: 컨트롤러
__9.2.6 단위 테스트 작성: 이벤트/메시지 핸들러
9.3 마치며
```

# 정리 전략?

- 전부 정리는 NO
- 핵심중에서 꼭 적고 가야겠다 싶은 것만!
- 나의 생각을 섞어서 적을것..!
- 떠오르는 것 먼저 간단하게..!

# 내용

## 9장 마이크로서비스 테스트 1부

### 9.1 마이크로서비스 아키텍처 테스트 전략

테스트 전략으로 단위 테스트, 통합테스트, 컴포넌트 테스트, 인수테스트를 잘하라는 이야기를 했었음.

#### \_\_9.1.1 테스트 개요

##### 자동화 테스트 작성

- 익히 알던것.

##### 목/스텁을 이용한 테스트

- 목과 스텁의 차이?
  Stub
  인스턴스화하여 구현한 가짜 객체(Dummy, 기능 구현이 없음)을 이용해 실제로 동작하는 것처럼 보이게 만드는 객체입니다.
  해당 인터페이스나 클래스를 최소한으로 구현합니다.
  테스트에서 호출된 요청에 대해 미리 준비해둔답변을 응답합니다.
  테스트시에 프로그래밍된 것 외에는 응답하지 않습니다.
  협력 객체의 특정 부분이 테스트가 어려운 경우, stub을 사용하여 수월하게 테스트할 수 있습니다.
  Stub's Lifecycle
  Setup, 테스트 준비
  Exercise, 테스트
  Verify state, 상태 검증
  Teardown, 리소스 정리
  Mock
  호출에 대한 기대를 명세하고, 내용에 따라 동작하도록 프로그래밍 된 객체입니다.
  테스트 작성을 위한 환경 구축이 어려울 때, 테스트하고자 하는 코드와 엮인 객ㅊ들을 대신하기 위해 만들어진 객체입니다.
  행위 검증을 진행합니다.
  Mock's Lifecycle
  Setup data, 데이터 준비
  Setup expectations, 예상되는 결과 준비
  Exercise, 테스트
  Verify expectations, 예상 검증
  Verify state, 상태 검증
  Teardown, 리소스 정리
  Stub과 Mock의 차이
  stub을 포함한 다른 대역들은 상태 검증(state verification) 을 사용하고 Mock 오브젝트는 행위 검증(behavior verification) 을 사용합니다.

상태 검증이란 메소드가 수행된 후, 객체의 상태를 확인하여 올바르게 동작했는지를 확인하는 검증법입니다.
행위 검증이란 메소드의 리턴 값으로 판단할 수 없는 경우, 특정 동작을 수행하는지 확인하는 검증법입니다.
검증의 대상이 다르다는 것이 중요한 체크 요소입니다.

https://azderica.github.io/00-test-mock-and-stub/

##### 테스트 종류

- 단위 테스트 : 가장작은 부분 테스트
- 통합 테스트 : 애플리케이션 서비스가 이
- 컴포넌트 테스트
- 종단 간 테스트

#### \_\_9.1.2 마이크로서비스 테스트

#### \_\_9.1.3 배포 파이프라인

### 9.2 서비스 단위 테스트 작성

- 테스트 종류를 2개로 봄.

#### \_\_9.2.1 단위 테스트 작성: 엔터티

#### \_\_9.2.2 단위 테스트 작성: 밸류 객체

#### \_\_9.2.3 단위 테스트 작성: 사가

#### \_\_9.2.4 단위 테스트 작성: 도메인 서비스

#### \_\_9.2.5 단위 테스트 작성: 컨트롤러

#### \_\_9.2.6 단위 테스트 작성: 이벤트/메시지 핸들러

## 9.3 마치며

- 내가 익히 알던 테스트에서 다른 패턴이 보인다거나 그런 것은 없었음.

# 참고자료
